@import url("../spacing/spacing.css");

:root {
  /* Basic sizing for fullwidth cards: */
  --fullwidthcard-min-height: 400px;
  --fullwidthcard-content-min-height: calc(
    var(--fullwidthcard-min-height) - 2 * var(--hds-spacing-20-24)
  );
  --fullwidthcard-image-aspect-mini: 100 / 155;
  --fullwidthcard-image-height-max: 420px;

  @media (width >= 800px) {
    --fullwidthcard-image-height-max: 650px;
  }

  --fullwidthcard-image-height-fixed: 300px;

  @media (width >= 500px) {
    --fullwidthcard-image-height-fixed: 600px;
  }
}

.hds-card.hds-card--full-width {
  max-width: inherit;

  * {
    box-sizing: border-box;
  }

  .hds-card__media {
    overflow: hidden;
    position: relative;
    border-radius: var(--hds-border-radius-8);
    max-height: var(--fullwidthcard-image-height-max);
    width: 100%;

    /*  Responsivity: different card layouts and content/images sizes,
			while still displaying as much as the image as possible and trying to keep focus on the middle,
			.hds-card__media is displayed in particular ways on particular viewport widths,
			 but always filling the available width
			 (which below 800px is the full width of the card minus padding,
			 and above 800px is only half the width of the card):
		*/

    /* Narrowest: fixed aspect ratio (portrait: height is 1.5 times the width). */
    @media (width <= 307px) {
      aspect-ratio: var(--fullwidthcard-image-aspect-mini);
    }

    /* Second narrowest: fixed image height */
    @media (width >= 308px) and (width <= 411px) {
      height: var(--fullwidthcard-image-height-fixed);
    }

    /* Middle narrow: fixed aspect ratio (quare format), variable height */
    @media (width >= 412px) and (width <= 647px) {
      aspect-ratio: 1;
    }

    /* "Widest" narrow card layout: fixed image height (but higher now) */
    @media (width >= 648px) and (width <= 799px) {
      height: var(--fullwidthcard-image-height-fixed);
    }
  }

  .hds-card__body > * {
    margin: var(--hds-spacing-32-40);
  }
}

/*  Wide layout: image to the left or right of the text.
	Image height is at least 400px high, but scales up if the body text is higher.
	Image has a max height if the text is huge, limiting the aspect ratio of the image.
 */
@media (width >= 800px) {
  .hds-card.hds-card--full-width {
    display: flex;
    flex-direction: row;
    gap: var(--hds-spacing-12-16);

    & > .hds-card__media,
    & > .hds-card__body {
      flex: 1;
      min-height: var(--fullwidthcard-content-min-height);
    }

    /* Image is absolutely positioned and centered within .hds-card__media, to avoid making .hds-card__media outgrow the body text. */
    .hds-card__media > .hds-card__media--img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* Body sizes itself based on its content */
    .hds-card__body {
      align-self: flex-start;
      display: flex;
      flex-direction: row;
      align-items: center;
    }
  }
}
